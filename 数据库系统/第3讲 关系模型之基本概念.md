# 数据库系统 战德臣
## 第3讲 关系模型之基本概念
### 关系模型的概述
关系模型的三要素:   
 * **基本结构**: Table  
 * **基本操作**: 并、差、广义积、选择、投影、交、连接、除  
 * **完整性约束**: 实体完整性、参照完整性、用户定义完整性  
 关系代数: 基于集合的运算, 是一次一集合的操作, 是一种数学语言
 ![关系代数的解释](imgs/image-5.png)  

关系运算 -> 关系数据库语言 -> DBMS的实现  
### 什么是关系
**"表"的严格定义**
* 首先定义 列 的取值范围 域(一组值的集合), 集合中元素的个数称为域的基数。
* 定义元组及所有可能组合成的元组: **笛卡尔积**(根据N个域形成的所有可能的n-元组的集合)。笛卡尔积的每个元素(d1,d2,...,dn)称为一个n-元组, 每个值di叫做一个分量。
* 关系: 一组域的笛卡尔积的子集(笛卡尔积中抽出来的有意义的组合), 此时列名(对关系当中这一列的含义取名)称为属性名。

关系模式是稳定的(结构), 而关系是某一时刻的值, 是随时间可能发生变化的。  
**关系的特性**
* 列是同质: 每一列中的分量来自同一域, 是同一类型的数据(即每一列的数据类型必须相同)
* 不同列可来自同一个域: 每一列为一个属性, 不同的属性要给不同的属性名
* 列位置互换性、行位置互换性: 区分列靠列名、区分行靠某一或几列的值(关键字)
* 理论上, 关系的任意两个元组不能完全相同。(但Table不完全遵守这个特性)
* 属性不可再分特性: 又称为关系第一范式, 不能存在复合属性或属性再分的情况。

**关系中的概念**
* **候选码**: 关系中的一个属性组, 其值能**唯一标识**一个元组。(从该属性组中去掉任何一个属性都不再具有这个特性)这样的属性组称为候选码。有时关系中有很多组候选码。
* **主码(主键)**: 从若干候选码中选定一个作为主码, DBMS以主码为主要线索管理关系中的元组。
* **主属性与非主属性**: 包含在任何一个候选码中的属性称为主属性。
* **全码**: 所有属性构成这个关系的候选码(最极端的情况)。
* **外码(外键)**: 是关系R中的属性组但不是候选码, 但其与另一个关系S的候选码相对应。两个关系之间通常靠外码连接。**外码是连接两个或多个关系的纽带**。

关系是严格的数学的定义, 没有重复的原则, 但表是可以的。
![小结](imgs/image-6.png)  
### 关系模型中的完整性约束
**完整性约束规则**
* **实体完整性**: 关系的主码中的属性值不能为空值(不知道或无意义的值)。
* **参照完整性**: 外码可以为空值, 但不为空值时必须为外表的主码(例如分配学生所在的系)。
* **用户自定义完整性**: 用户针对具体的应用环境定义的完整性约束(例如年龄在多少之间\性别等)。此定义机制通常由DBMS提供使得用户可以自行定义、由DBMS检验操作的正确性。
### 总结
![第3讲课程的图总结](imgs/image-7.png)